{"version":3,"sources":["../../src/controllers/Tool.js"],"names":["Tool","require","module","exports","index","req","res","find","error","tools","status","json","code","message","description","store","create","body","tool","findId","findById","params","id","update","title","link","tags","save","delete","deleteOne","_id","findTags","query","split","$all"],"mappings":"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","file":"Tool.js","sourcesContent":["const Tool = require('../models/Tool')\n\nmodule.exports = {\n  index (req, res) {\n    Tool.find({}, (error, tools) => {\n      if (error) {\n        return res.status(400).json({\n          code: 400,\n          message: 'Wrong credentials!',\n          description: error\n        })\n      }\n\n      return res.status(200).json(tools)\n    })\n  },\n\n  store (req, res) {\n    Tool.create(req.body, (error, tool) => {\n      if (error) {\n        return res.status(400).json({\n          code: 400,\n          message: 'Wrong credentials!',\n          description: error\n        })\n      }\n\n      return res.status(201).json(tool)\n    })\n  },\n\n  findId (req, res) {\n    Tool.findById(req.params.id, (error, tool) => {\n      if (error) {\n        return res.status(400).json({\n          code: 400,\n          message: 'Wrong credentials!',\n          description: error\n        })\n      }\n\n      return res.status(200).json(tool)\n    })\n  },\n\n  update (req, res) {\n    Tool.findById(req.params.id, (error, tool) => {\n      if (error) {\n        return res.status(400).json({\n          code: 400,\n          message: 'Wrong credentials!',\n          description: error\n        })\n      }\n\n      tool.title = req.body.title || tool.title\n      tool.link = req.body.link || tool.link\n      tool.description = req.body.description || tool.description\n      tool.tags = req.body.tags || tool.tags\n\n      tool.save((error, tool) => {\n        if (error) {\n          return res.status(400).json({\n            code: 400,\n            message: 'Wrong credentials!',\n            description: error\n          })\n        }\n\n        return res.status(200).json(tool)\n      })\n    })\n  },\n\n  delete (req, res) {\n    Tool.deleteOne({ _id: req.params.id }, error => {\n      if (error) {\n        return res.status(400).json({\n          code: 400,\n          message: 'Wrong credentials!',\n          description: error\n        })\n      }\n\n      return res.status(200).json({ message: `Removed tool: ${req.params.id}` })\n    })\n  },\n\n  findTags (req, res) {\n    const tags = req.query.tags.split(',')\n\n    Tool.find({ tags: { $all: tags } }, (error, tools) => {\n      if (error) {\n        return res.status(400).json({\n          code: 400,\n          message: 'Wrong credentials!',\n          description: error\n        })\n      }\n\n      return res.status(200).json(tools)\n    })\n  }\n}\n"]}